<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Leaflet.geoCSV Static Example</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
  <style>
    #map { width: 100%; height: 600px; }
  </style>
</head>
<body>
  <h2>Map from CSV (Leaflet.geoCSV)</h2>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://rawcdn.githack.com/joker-x/Leaflet.geoCSV/master/leaflet.geocsv.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    var map = L.map('map').setView([51.45, -2.58], 15);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Use your CSV URL here:
    $.get('https://raw.githubusercontent.com/glynnie/findmyride/refs/heads/main/FINALUK.csv', function(csvContent) {
      var geoCsvLayer = L.geoCsv(csvContent, {
        firstLineTitles: true,
        fieldSeparator: ',',
        latitudeTitle: 'lat',
        longitudeTitle: 'lng',
        onEachFeature: function(feature, layer) {
          var popupText = feature.properties.popup || "No info";
          layer.bindPopup(popupText);
        }
      });
      geoCsvLayer.addTo(map);
      map.fitBounds(geoCsvLayer.getBounds());
    });
  </script>
</body>
</html>
